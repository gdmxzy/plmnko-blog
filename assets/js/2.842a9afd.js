(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{162:function(s,t,n){s.exports=n.p+"assets/img/nginx_init.8d14c7b6.png"},163:function(s,t,n){s.exports=n.p+"assets/img/catalina.5df76424.png"},164:function(s,t,n){s.exports=n.p+"assets/img/tomcat.ab707e0e.png"},165:function(s,t,n){s.exports=n.p+"assets/img/404.1cbd05c5.png"},166:function(s,t,n){s.exports=n.p+"assets/img/index.9635c375.png"},167:function(s,t,n){s.exports=n.p+"assets/img/howto.55fc89e4.png"},174:function(s,t,n){"use strict";n.r(t);var e=[function(){var s=this.$createElement,t=this._self._c||s;return t("h1",{attrs:{id:"nginx结合tomcat的简单配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx结合tomcat的简单配置","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx结合Tomcat的简单配置")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"以下用nginx-1-14-1和tomcat9作为演示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#以下用nginx-1-14-1和tomcat9作为演示","aria-hidden":"true"}},[this._v("#")]),this._v(" 以下用nginx-1.14.1和Tomcat9作为演示")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"启动nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动nginx")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("在cmd中切换目录至F:\\nginx-1.14.1(nginx解压后的根目录)并执行命令"),t("code",[this._v("start nginx")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("F:\\nginx-1.14.1\\start nginx\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("访问"),t("code",[this._v("http://localhost")]),this._v("(或"),t("code",[this._v("http://localhost:80")]),this._v(")出现如下界面则nginx启动成功")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(162),alt:"avatar"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("当前"),t("code",[this._v("nginx.conf")]),this._v("配置如下：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-conf line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server {\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n\n        #error_page  404              /404.html;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[n("code",[s._v("80")]),s._v("为当前监听端口，"),n("code",[s._v("localhost")]),s._v("为请求都转发到本地nginx文件夹，"),n("code",[s._v("location /")]),s._v("表示所有请求都将被拦截，"),n("code",[s._v("root")]),s._v("表示当路径匹配时会从文件夹内寻找对应文件，"),n("code",[s._v("index")]),s._v("表示当没有指定主页时默认选择此为指定文件（可指定多个，并且是顺序加载的）")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"启动tomcat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动tomcat","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动tomcat")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("解压tomcat后直接在bin目录下运行startup.bat，就可以启动Tomcat(注：tomcat无需配置环境变量)；源码中已经解释如果"),t("code",[this._v("CATALINA_HOME")]),this._v("为空会把当前目录设置为"),t("code",[this._v("CATALINA_HOME")]),this._v("的值……")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(163),alt:"avatar"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"proxy-pass代理转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proxy-pass代理转发","aria-hidden":"true"}},[this._v("#")]),this._v(" proxy_pass代理转发")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-conf line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server {\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n            proxy_pass   http://localhost:8080;\n        }\n\n        #error_page  404              /404.html;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("通过"),n("code",[s._v("proxy_pass")]),s._v("配置请求转发地址,当访问"),n("code",[s._v("localhost")]),s._v("的"),n("code",[s._v("80")]),s._v("端口时，请求会跳转至"),n("code",[s._v("localhost")]),s._v("的"),n("code",[s._v("8080")]),s._v("端口处（tomcat）；修改完nginx.conf后不需要重启nginx，执行命令"),n("code",[s._v("nginx -s -reload")]),s._v("即可重新加载")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(164),alt:"avatar"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("F:\\nginx-1.14.1\\nginx -t    (检查错误)\nF:\\nginx-1.14.1\\nginx -s -reload    (重新加载)\nF:\\nginx-1.14.1\\nginx -s -quit    (安全关闭)\nF:\\nginx-1.14.1\\nginx -s -stop    (强制关闭)\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br"),t("span",{staticClass:"line-number"},[this._v("3")]),t("br"),t("span",{staticClass:"line-number"},[this._v("4")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("如果多次加载仍然报"),t("code",[this._v("400")]),this._v("/"),t("code",[this._v("404")]),this._v("错误，可尝试执行如下命令把当前所有nginx.exe进程kill掉，重新启动nginx")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("tasklist /fi “imagename eq nginx.exe”   (查看所有nginx.exe)\ntaskkill /f /t /im nginx.exe    (关闭所有nginx.exe)\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"静态文件分离配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#静态文件分离配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 静态文件分离配置")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("通过区分文件类型进行过滤，由于"),n("code",[s._v("nginx")]),s._v("不是"),n("code",[s._v("servlet")]),s._v("容器，无法处理"),n("code",[s._v("jsp")]),s._v("，所以"),n("code",[s._v("jsp")]),s._v("直接交给"),n("code",[s._v("tomcat")]),s._v("处理，而"),n("code",[s._v("html,js,css，png")]),s._v("等这些不需要处理的直接交给"),n("code",[s._v("nginx")]),s._v("进行缓存。这时主要用到的元素是location，同时涉及到一部分正则表达式，具体配置如下：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-conf line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server {\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location ~ \\.jsp$ {\n            proxy_pass   http://localhost:8080;\n        }\n        \n        location ~ \\.(html|css|js|png|gif)$ {\n            root   F:/apache-tomcat-9.0.13/webapps/ROOT;\n        }\n\n        #error_page  404              /404.html;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("此时再此访问"),t("code",[this._v("localhost")]),this._v("会报"),t("code",[this._v("404")]),this._v("错误")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(165),alt:"avatar"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("但是输入"),t("code",[this._v("localhost/index.jsp")]),this._v("，则一样可以跳转至"),t("code",[this._v("tomcat")]),this._v("页面")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(166),alt:"avatar"}})])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("点击"),n("code",[s._v("Manager Application HOW-TO")]),s._v("，则又出现"),n("code",[s._v("404")]),s._v("错误；因为这是个"),n("code",[s._v("html")]),s._v("页面，当"),n("code",[s._v("location")]),s._v("匹配到"),n("code",[s._v("html")]),s._v("时，会到"),n("code",[s._v("root")]),s._v("目录下去找，但它并不在"),n("code",[s._v("root")]),s._v("目录下，而是在"),n("code",[s._v("docs")]),s._v("目录下，所以找不到这个页面")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(167),alt:"avatar"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"使用负载均衡（加权轮询策略）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用负载均衡（加权轮询策略）","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用负载均衡（加权轮询策略）")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-conf line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("upstream tomcat_server {\n\tserver localhost:8080 weight=3;\n\tserver localhost:8081;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n\n    location ~ \\.jsp$ {\n        proxy_pass   http://tomcat_server;\n        proxy_set_header Host $host;\n    }\n        \n    location ~ \\.(html|css|js|png|gif)$ {\n        root   F:/apache-tomcat-9.0.13/webapps/ROOT;\n    }\n\n    #error_page  404              /404.html;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])])}],a=n(0),r=Object(a.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[s._m(0),s._v(" "),n("p",[n("strong",[n("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nginx官网下载"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("strong",[n("a",{attrs:{href:"https://tomcat.apache.org/download-90.cgi",target:"_blank",rel:"noopener noreferrer"}},[s._v("Tomcat官网下载"),n("OutboundLink")],1)])]),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),s._m(5),s._v(" "),s._m(6),s._v(" "),s._m(7),s._v(" "),s._m(8),s._m(9),s._v(" "),s._m(10),s._v(" "),s._m(11),s._v(" "),s._m(12),s._v(" "),s._m(13),s._v(" "),s._m(14),s._m(15),s._v(" "),s._m(16),s._v(" "),n("p",[s._v("其他命令：")]),s._v(" "),s._m(17),s._m(18),s._v(" "),s._m(19),s._m(20),s._v(" "),s._m(21),s._v(" "),s._m(22),s._m(23),s._v(" "),s._m(24),s._v(" "),s._m(25),s._v(" "),s._m(26),s._v(" "),s._m(27),s._v(" "),s._m(28),s._v(" "),s._m(29),s._v(" "),s._m(30)])},e,!1,null,null,null);r.options.__file="nginx_tomcat.md";t.default=r.exports}}]);